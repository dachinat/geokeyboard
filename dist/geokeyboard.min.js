(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){'use strict';function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e(this,a),this.selectors=[],this.lastFocus=null,this.params=Object.assign({hotSwitchKey:96,globalHotSwitch:null,globalCheckbox:null},c),this.listen(b,d)}var b=String.fromCharCode;return f(a,[{key:'listen',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return this.constructor._warnBadSelector(a),a=Array.from(document.querySelectorAll(a)),a.forEach(function(a){if(a=b.constructor.getContext(a),a.opts||(a.opts={replaceOnType:!0,hotSwitch:!0,onChange:null,checkbox:null,checkFocus:!0,listeners:[]}),a.opts=Object.assign(a.opts,c),b.toggleListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),b.toggleListener(a,'replaceOnPaste','paste',function(a){b.constructor._replacePasted.call(b,a)}),b.toggleListener(a,'hotSwitch','keypress',function(a){b.constructor._hotSwitch.call(b,a)}),b.toggleListener(a,'checkFocus','focus',function(a){b.constructor._checkFocus.call(b,a)},!0),b.params.globalCheckbox){var d=document.querySelector(b.params.globalCheckbox);d.opts||(d.opts={watchCheckbox:!0,listeners:[]}),b.toggleListener(d,'watchCheckbox','change',function(a){b.constructor._watchCheckbox.call(b,a)})}if(a.opts.checkbox){var e=document.querySelector(a.opts.checkbox);e.opts||(e.opts={watchCheckbox:!0,listeners:[]}),b.toggleListener(e,'watchCheckbox','change',function(a){b.constructor._watchCheckbox.call(b,a)})}}),this.selectors=Array.from(new Set(this.selectors.concat(a))),d&&d.call(this,a),this}},{key:'toggleListener',value:function(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]&&arguments[4],f=this.hasListener(a,b);a.opts[b]?!1===f&&this.addListener(a,b,c,d,e):!1!==f&&this.removeListener(a,b,c,e)}},{key:'addListener',value:function(a,b,c,e){a.opts.listeners.push(d({},b,e)),a.addEventListener(c,this.getListener(a,b))}},{key:'removeListener',value:function(a,b,c){a.removeEventListener(c,this.getListener(a,b)),a.opts.listeners.splice(this.hasListener(a,b),1)}},{key:'hasListener',value:function(a,b){var c=a.opts.listeners.findIndex(function(a){return'function'==typeof a[b]});return-1!==c&&c}},{key:'getListener',value:function(a,b){try{return a.opts.listeners.find(function(a){return a[b]})[b]}catch(c){console.warn('There is no such listener as \''+b+'\' for \''+a.outerHTML+'\'...')}}},{key:'_enable',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;a=this.constructor.getContext(a),a.opts.replaceOnType=!0,this.addListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),a.opts.onChange&&a.opts.onChange.call(this,!0),a.opts.checkbox&&c&&(document.querySelector(a.opts.checkbox).checked=!0),this.params.globalCheckbox&&(document.querySelector(this.params.globalCheckbox).checked=!0)}},{key:'_disable',value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;a=this.constructor.getContext(a),a.opts.replaceOnType=!1,this.removeListener(a,'replaceOnType','keypress',this.getListener(a,'replaceOnType')),a.opts.onChange&&a.opts.onChange.call(this,!1),a.opts.checkbox&&b&&(document.querySelector(a.opts.checkbox).checked=!1),this.params.globalCheckbox&&(document.querySelector(this.params.globalCheckbox).checked=!1)}}],[{key:'_replaceTyped',value:function(a){!new RegExp(this.constructor.characterSet.join('|')).test(a.key)||1<a.key.length||(console.log('return'),a.preventDefault(),g(a.currentTarget,b(this.constructor.characterSet.indexOf(a.key)+4304)))}},{key:'_replacePasted',value:function(a){var d=this,c=a.clipboardData?a.clipboardData.getData('text/plain'):window.clipboardData?window.clipboardData.getData('Text'):null;g(a.currentTarget,c.split('').map(function(a){var c=d.constructor.characterSet.indexOf(a);return-1===c?a:b(c+4304)}).join('')),a.preventDefault()}},{key:'_checkFocus',value:function(a){a.currentTarget.opts.checkbox&&(document.querySelector(a.currentTarget.opts.checkbox).checked=a.currentTarget.opts.replaceOnType),this.params.globalCheckbox&&(document.querySelector(this.params.globalCheckbox).checked=a.currentTarget.opts.replaceOnType),this.lastFocus=a.currentTarget}},{key:'_watchCheckbox',value:function(a){var b=this,c=document.querySelector(this.params.globalCheckbox)===a.currentTarget?this.selectors:this.selectors.filter(function(c){return c=b.constructor.getContext(c),document.querySelector(c.opts.checkbox)===a.currentTarget});c.forEach(function(c){a.currentTarget.checked?b._enable(c):b._disable(c)}),this.lastFocus&&c.includes(this.lastFocus.frameElement||this.lastFocus)?this.lastFocus.focus():this.constructor.getContext(c[0]).focus()}},{key:'_hotSwitch',value:function(a){(a.keyCode===this.params.hotSwitchKey||a.which===this.params.hotSwitchKey)&&(this.constructor._toggle.call(this,a.currentTarget),a.preventDefault())}},{key:'_toggle',value:function(a){var b=this,c=this.hasListener(a,'replaceOnType');!1===c?'function'==typeof this.params.globalHotSwitch?(this.selectors.forEach(function(c){return b._enable(c,c===a)}),this.params.globalHotSwitch.call(this,!0)):this._enable(a):'function'==typeof this.params.globalHotSwitch?(this.selectors.forEach(function(c){return b._disable(c,c===a)}),this.params.globalHotSwitch.call(this,!1)):this._disable(a)}},{key:'_warnBadSelector',value:function(a){var b=this;a.split(', ').forEach(function(a){if(!document.querySelector(a))return console.warn(b.constructor.name+': An element with identifier \''+a+'\' not found. (Skipping...)'),!0})}},{key:'getContext',value:function(a){return'iframe'===a.tagName.toLowerCase()?(a.contentWindow||a.contentDocument).window:a}},{key:'characterSet',get:function(){return['a','b','g','d','e','v','z','T','i','k','l','m','n','o','p','J','r','s','t','u','f','q','R','y','S','C','c','Z','w','W','x','j','h']}},{key:'propertyName',get:function(){return this.constructor.name}}]),a}();window.Geokeyboard=h},function(a){'use strict';a.exports=function(a,b){var c=(a.tagName||a.frameElement.tagName).toLowerCase();if('div'===c||'iframe'===c){var d,e,f=window,g=document;if('iframe'===c&&(f=a.window,g=a.document),!f.getSelection)g.selection&&'Control'!==g.selection.type&&g.selection.createRange().pasteHTML(b);else if(d=f.getSelection(),d.getRangeAt&&d.rangeCount){e=d.getRangeAt(0),e.deleteContents();var h=g.createElement('div');h.innerHTML=b;for(var i,j,k=g.createDocumentFragment();i=h.firstChild;)j=k.appendChild(i);e.insertNode(k),j&&(e=e.cloneRange(),e.setStartAfter(j),e.collapse(!0),d.removeAllRanges(),d.addRange(e))}}else if('input'===c||'textarea'===c)if('number'==typeof a.selectionStart&&'number'==typeof a.selectionEnd){var l=a.selectionStart;a.value=a.value.slice(0,l)+b+a.value.slice(a.selectionEnd),a.selectionStart=a.selectionEnd=l+1}else{var m=document.selection.createRange(),n=a.value.replace(/\r\n/g,'\n'),o=a.createTextRange();o.moveToBookmark(m.getBookmark());var p=a.createTextRange();p.collapse(!1);var q,r;-1<o.compareEndPoints('StartToEnd',p)?q=r=charLength:(q=-o.moveStart('character',-charLength),q+=n.slice(0,q).split('\n').length-1,-1<o.compareEndPoints('EndToEnd',p)?r=charLength:(r=-o.moveEnd('character',-charLength),r+=n.slice(0,r).split('\n').length-1)),a.value=a.value.slice(0,q)+b+a.value.slice(r),o=a.createTextRange(),o.collapse(!0)}}}]);
//# sourceMappingURL=geokeyboard.min.js.map