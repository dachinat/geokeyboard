(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){'use strict';var d=c(1),e=c(2),f=c(3),g=c(4),h=c(5);d.extensions={Select:e,Checkbox:f,LocalStorage:g,insertAtCaret:h},window.Geokeyboard=d},function(a){'use strict';function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c(this,a),this.selectors=[],this.extensions=new Set,this.lastFocus=null,this.params=Object.assign({hotSwitchKey:96,change:null,globals:[]},d),this.listen(b,e),this._loadGlobalExtensions()}var f=String.fromCharCode;return d(a,[{key:Symbol.call,value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new this.constructor(a,b,c)}},{key:'listen',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return a?(this.constructor._warnBadSelector(a),a=Array.from(document.querySelectorAll(a)),a.forEach(function(a){a=b.constructor.getContext(a),a[b.constructor.opts]||(a[b.constructor.opts]={replaceOnType:!0,replaceOnPaste:!1,hotSwitch:!0,change:null,checkFocus:!0,listeners:[]}),a[b.constructor.opts]=Object.assign(a[b.constructor.opts],c),b.toggleListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),b.toggleListener(a,'replaceOnPaste','paste',function(a){b.constructor._replacePasted.call(b,a)}),b.toggleListener(a,'hotSwitch','keypress',function(a){b.constructor._hotSwitch.call(b,a)}),b.toggleListener(a,'checkFocus','focus',function(a){b.constructor._checkFocus.call(b,a)},!0)}),this.selectors=Array.from(new Set(this.selectors.concat(a))),d&&d.call(this,a),this._loadGlobalExtensions(),this):this}},{key:'attach',value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=Reflect.construct(a,[this,b,c]);return this.extensions.add(d),this._attachListeners(d),this}},{key:'_attachListeners',value:function(a){var c=this,d=a.listeners();d&&d.forEach(function(d){var e=d[0],f=d[1].reduce(function(a,d){return Object.assign(a,b({},d[0],!0))},{listeners:[]});e[c.constructor.opts]=e[c.constructor.opts]?Object.assign(f,e[c.constructor.opts]):f,e[c.constructor.opts]=Object.assign(e[c.constructor.opts],a.opts),d[1].forEach(function(a){c.toggleListener(e,a[0],a[1],a[2])}),c.selectors=Array.from(new Set(c.selectors.concat([e])))})}},{key:'toggleListener',value:function(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]&&arguments[4],f=this.hasListener(a,b);a[this.constructor.opts][b.split('-')[0]]?!1===f&&this.addListener(a,b,c,d,e):!1!==f&&this.removeListener(a,b,c,e)}},{key:'addListener',value:function(a,c,d,e){var f=this.hasListener(a,c);!1===f&&a[this.constructor.opts].listeners.push(b({},c,e)),a.addEventListener(d,this.getListener(a,c))}},{key:'removeListener',value:function(a,b,c){a.removeEventListener(c,this.getListener(a,b)),a[this.constructor.opts].listeners.splice(this.hasListener(a,b),1)}},{key:'hasListener',value:function(a,b){var c=a[this.constructor.opts].listeners.findIndex(function(a){return'function'==typeof a[b]});return-1!==c&&c}},{key:'getListener',value:function(a,b){var c=a[this.constructor.opts].listeners.find(function(a){return a[b]});return c?c[b]:void 0}},{key:'_enable',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if((a=this.constructor.getContext(a),a[this.constructor.opts].replaceOnType=!0,!(a.hasAttribute&&a.hasAttribute('type')&&'text'!==a.getAttribute('type')))&&(a[this.constructor.opts].change&&!1===this.hasListener(a,'replaceOnType')&&a[this.constructor.opts].change.call(this,!0),this.addListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),!c)){var d,e=!0,f=!1;try{for(var g,h,i=this.extensions[Symbol.iterator]();!(e=(g=i.next()).done);e=!0)h=g.value,'function'==typeof h.enabled&&h.enabled.call(h,a)}catch(a){f=!0,d=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw d}}}}},{key:'_disable',value:function(a){var b=1<arguments.length&&void 0!==arguments[1]&&arguments[1];a=this.constructor.getContext(a),a[this.constructor.opts].replaceOnType=!1;var c=this.getListener(a,'replaceOnType');if(c&&(a[this.constructor.opts].change&&!1!==this.hasListener(a,'replaceOnType')&&a[this.constructor.opts].change.call(this,!1),this.removeListener(a,'replaceOnType','keypress',c),!b)){var d,e=!0,f=!1;try{for(var g,h,i=this.extensions[Symbol.iterator]();!(e=(g=i.next()).done);e=!0)h=g.value,'function'==typeof h.disabled&&h.disabled.call(h,a)}catch(a){f=!0,d=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw d}}}}},{key:'_focus',value:function(a){this.lastFocus&&a.includes(this.lastFocus.frameElement||this.lastFocus)?this.lastFocus.focus():this.constructor.getContext(a[0]).focus()}},{key:'_loadGlobalExtensions',value:function(){var a=this;this.params.globals.forEach(function(b){var c=Reflect.construct(b[0],[a,null,b[1]]);a.extensions.add(c)})}}],[{key:'_replaceTyped',value:function(a){!new RegExp(this.constructor.characterSet.join('|')).test(a.key)||1<a.key.length||(a.preventDefault(),this.constructor.extensions.insertAtCaret(a.currentTarget,f(this.constructor.characterSet.indexOf(a.key)+4304)))}},{key:'_replacePasted',value:function(a){var b=this,c=a.clipboardData?a.clipboardData.getData('text/plain'):window.clipboardData?window.clipboardData.getData('Text'):null;this.constructor.extensions.insertAtCaret(a.currentTarget,c.split('').map(function(a){var c=b.constructor.characterSet.indexOf(a);return-1===c?a:f(c+4304)}).join('')),a.preventDefault()}},{key:'_checkFocus',value:function(a){this.lastFocus=a.currentTarget}},{key:'_hotSwitch',value:function(a){(a.keyCode===this.params.hotSwitchKey||a.which===this.params.hotSwitchKey)&&(this.constructor._toggle.call(this,a.currentTarget),a.preventDefault())}},{key:'_toggle',value:function(a){var b=this,c=this.hasListener(a,'replaceOnType');!1===c?'function'==typeof this.params.change?(this.selectors.forEach(function(c){return b._enable(c,c===a)}),this.params.change.call(this,!0)):this._enable(a):'function'==typeof this.params.change?(this.selectors.forEach(function(c){return b._disable(c,c===a)}),this.params.change.call(this,!1)):this._disable(a)}},{key:'_warnBadSelector',value:function(a){var b=this;a.split(', ').forEach(function(a){if(!document.querySelector(a))return console.warn(b.constructor.name+': An element with identifier \''+a+'\' not found. (Skipping...)'),!0})}},{key:'getContext',value:function(a){return'IFRAME'===a.tagName?(a.contentWindow||a.contentDocument).window:a}},{key:'characterSet',get:function(){return['a','b','g','d','e','v','z','T','i','k','l','m','n','o','p','J','r','s','t','u','f','q','R','y','S','C','c','Z','w','W','x','j','h']}},{key:'opts',get:function(){return'geokeyboard'}}]),a}();a.exports=e},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,a),this.parent=c,this.selectors=d?Array.from(document.querySelectorAll(d)):this.parent.selectors,this.opts=Object.assign({select:null,focusListenerForSelect:!0,selectListener:!0,autoSwitch:!0},e),this.select=document.querySelector(this.opts.select)||null,this.select.value=this.selectors[0][this.parent.constructor.opts].replaceOnType.toString(),d||this.parent._attachListeners(this)}return c(a,[{key:'selectChanged',value:function(a){var b=this;this.selectors.forEach(function(c){var d=a.currentTarget.value;'true'===d?b.parent._enable.call(b.parent,c):'false'===d&&b.parent._disable.call(b.parent,c)}),this.parent._focus(this.selectors)}},{key:'updateSelect',value:function(a){this.select.value=a.currentTarget[this.parent.constructor.opts].replaceOnType}},{key:'listeners',value:function(){var a=this;if(null!==this.select){var b=[];return this.selectors.forEach(function(c,d){b.push([c,[['focusListenerForSelect-'+d,'focus',function(b){return a.updateSelect.call(a,b)}]]])}),b.push([this.select,[['selectListener','change',function(b){return a.selectChanged.call(a,b)}]]]),b}}},{key:'enabled',value:function(a){var b=this;!this.selectors||this.opts.autoSwitch&&this.selectors.includes(a.frameElement||a)&&(this.selectors.forEach(function(a){return b.parent._enable.call(b.parent,a,!0)}),this.select.value='true')}},{key:'disabled',value:function(a){var b=this;!this.selectors||this.opts.autoSwitch&&this.selectors.includes(a.frameElement||a)&&(this.selectors.forEach(function(a){return b.parent._disable.call(b.parent,a,!0)}),this.select.value='false')}}]),a}();a.exports=d},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,a),this.parent=c,this.selectors=d?Array.from(document.querySelectorAll(d)):this.parent.selectors,this.opts=Object.assign({checkbox:null,focusListenerForCheckbox:!0,checkboxListener:!0,autoSwitch:!0},e),this.checkbox=document.querySelector(this.opts.checkbox)||null,this.checkbox.checked=this.selectors[0][this.parent.constructor.opts].replaceOnType,d||this.parent._attachListeners(this)}return c(a,[{key:'checkboxChanged',value:function(a){var b=this;this.selectors.forEach(function(c){!0===a.currentTarget.checked?b.parent._enable.call(b.parent,c):b.parent._disable.call(b.parent,c)}),this.parent._focus(this.selectors)}},{key:'updateCheckbox',value:function(a){this.checkbox.checked=a.currentTarget[this.parent.constructor.opts].replaceOnType}},{key:'listeners',value:function(){var a=this;if(null!==this.checkbox){var b=[];return this.selectors.forEach(function(c,d){b.push([c,[['focusListenerForCheckbox-'+d,'focus',function(b){return a.updateCheckbox.call(a,b)}]]])}),b.push([this.checkbox,[['checkboxListener','change',function(b){return a.checkboxChanged.call(a,b)}]]]),b}}},{key:'enabled',value:function(a){var b=this;!this.selectors||this.opts.autoSwitch&&this.selectors.includes(a.frameElement||a)&&(this.selectors.forEach(function(a){return b.parent._enable.call(b.parent,a,!0)}),this.checkbox.checked=!0)}},{key:'disabled',value:function(a){var b=this;!this.selectors||this.opts.autoSwitch&&this.selectors.includes(a.frameElement||a)&&(this.selectors.forEach(function(a){return b.parent._disable.call(b.parent,a,!0)}),this.checkbox.checked=!1)}}]),a}();a.exports=d},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,a),this.parent=c,this.params=Object.assign({key:'geokeyboard_global'},e),this.load()}return c(a,[{key:'enabled',value:function(){localStorage.setItem(this.params.key,!0)}},{key:'disabled',value:function(){localStorage.setItem(this.params.key,!1)}},{key:'load',value:function(){var a=this,b=JSON.parse(localStorage.getItem(this.params.key));null===b||this.parent.selectors.forEach(function(c){return b?a.parent._enable(c):a.parent._disable(c)})}}]),a}();a.exports=d},function(a){'use strict';a.exports=function(a,b){var c=a.tagName||a.frameElement.tagName;if('DIV'===c||'IFRAME'===c){var d,e,f=window,g=document;if('IFRAME'===c&&(f=a.window,g=a.document),!f.getSelection)g.selection&&'Control'!==g.selection.type&&g.selection.createRange().pasteHTML(b);else if(d=f.getSelection(),d.getRangeAt&&d.rangeCount){e=d.getRangeAt(0),e.deleteContents();var h=g.createElement('DIV');h.innerHTML=b;for(var i,j,k=g.createDocumentFragment();i=h.firstChild;)j=k.appendChild(i);e.insertNode(k),j&&(e=e.cloneRange(),e.setStartAfter(j),e.collapse(!0),d.removeAllRanges(),d.addRange(e))}}else if('INPUT'===c||'TEXTAREA'===c)if('number'==typeof a.selectionStart&&'number'==typeof a.selectionEnd){var l=a.selectionStart;a.value=a.value.slice(0,l)+b+a.value.slice(a.selectionEnd),a.selectionStart=a.selectionEnd=l+1,a.blur(),a.focus()}else{var m=document.selection.createRange(),n=a.value.replace(/\r\n/g,'\n'),o=a.createTextRange();o.moveToBookmark(m.getBookmark());var p=a.createTextRange();p.collapse(!1);var q,r;-1<o.compareEndPoints('StartToEnd',p)?q=r=charLength:(q=-o.moveStart('character',-charLength),q+=n.slice(0,q).split('\n').length-1,-1<o.compareEndPoints('EndToEnd',p)?r=charLength:(r=-o.moveEnd('character',-charLength),r+=n.slice(0,r).split('\n').length-1)),a.value=a.value.slice(0,q)+b+a.value.slice(r),o=a.createTextRange(),o.collapse(!0)}}}]);
//# sourceMappingURL=geokeyboard.min.js.map