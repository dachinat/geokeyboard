(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)})([function(a,b,c){'use strict';var d=c(1),e=c(2),f=c(3),g=c(4),h=c(5);d.extensions={Select:e,Checkbox:f,LocalStorage:g,insertAtCaret:h},window.Geokeyboard=d},function(a){'use strict';function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c(this,a),this.selectors=[],this.extensions=new Set,this.lastFocus=null,this.params=Object.assign({hotSwitchKey:96,globalHotSwitch:null,forceEnabled:!1,globals:[]},d),this.listen(b,e),this.params.forceEnabled&&this._forceEnabled(),this._loadGlobalExtensions()}var f=String.fromCharCode;return d(a,[{key:'listen',value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return this.constructor._warnBadSelector(a),a=Array.from(document.querySelectorAll(a)),a.forEach(function(a){a=b.constructor.getContext(a),a[b.constructor.opts]||(a[b.constructor.opts]={replaceOnType:!0,hotSwitch:!0,onChange:null,checkFocus:!0,listeners:[]}),a[b.constructor.opts]=Object.assign(a[b.constructor.opts],c),b.toggleListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),b.toggleListener(a,'replaceOnPaste','paste',function(a){b.constructor._replacePasted.call(b,a)}),b.toggleListener(a,'hotSwitch','keypress',function(a){b.constructor._hotSwitch.call(b,a)}),b.toggleListener(a,'checkFocus','focus',function(a){b.constructor._checkFocus.call(b,a)},!0)}),this.selectors=Array.from(new Set(this.selectors.concat(a))),d&&d.call(this,a),this._loadGlobalExtensions(),this}},{key:'attach',value:function(a,c){var d,e,f=this,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},h=!0,j=!1;try{for(var k,m,i=this.extensions[Symbol.iterator]();!(h=(k=i.next()).done);h=!0)if(m=k.value,m instanceof a){d=m;break}}catch(a){j=!0,e=a}finally{try{!h&&i.return&&i.return()}finally{if(j)throw e}}d?d.redefine(c,g):d=Reflect.construct(a,[this,c,g]),this.extensions.add(d);var n=d.listeners();if(n)return n.forEach(function(a){var c=document.querySelector(a[0]),e=a[1].reduce(function(a,d){return Object.assign(a,b({},d[0],!0))},{listeners:[]});c[f.constructor.opts]=c[f.constructor.opts]?Object.assign(e,c[f.constructor.opts]):e,c[f.constructor.opts]=Object.assign(c[f.constructor.opts],d.opts),a[1].forEach(function(a){f.toggleListener(c,a[0],a[1],a[2])}),f.selectors=Array.from(new Set(f.selectors.concat([c])))}),this}},{key:'toggleListener',value:function(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]&&arguments[4],f=this.hasListener(a,b);a[this.constructor.opts][b.split('-')[0]]?!1===f&&this.addListener(a,b,c,d,e):!1!==f&&this.removeListener(a,b,c,e)}},{key:'addListener',value:function(a,c,d,e){var f=this.hasListener(a,c);!1===f&&a[this.constructor.opts].listeners.push(b({},c,e)),a.addEventListener(d,this.getListener(a,c))}},{key:'removeListener',value:function(a,b,c){a.removeEventListener(c,this.getListener(a,b)),a[this.constructor.opts].listeners.splice(this.hasListener(a,b),1)}},{key:'hasListener',value:function(a,b){var c=a[this.constructor.opts].listeners.findIndex(function(a){return'function'==typeof a[b]});return-1!==c&&c}},{key:'getListener',value:function(a,b){var c=a[this.constructor.opts].listeners.find(function(a){return a[b]});return!c,c?c[b]:void 0}},{key:'_enable',value:function(a){var b=this;a=this.constructor.getContext(a),a[this.constructor.opts].replaceOnType=!0,this.addListener(a,'replaceOnType','keypress',function(a){b.constructor._replaceTyped.call(b,a)}),a[this.constructor.opts].onChange&&a[this.constructor.opts].onChange.call(this,!0);var c,d=!0,e=!1;try{for(var f,g,h=this.extensions[Symbol.iterator]();!(d=(f=h.next()).done);d=!0)g=f.value,'function'==typeof g.enabled&&g.enabled.call(g,a),g.constructor.geokb&&g.constructor.globalEnabled.call(g)}catch(a){e=!0,c=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw c}}}},{key:'_disable',value:function(a){a=this.constructor.getContext(a),a[this.constructor.opts].replaceOnType=!1;var b=this.getListener(a,'replaceOnType');if(b){this.removeListener(a,'replaceOnType','keypress',b),a[this.constructor.opts].onChange&&a[this.constructor.opts].onChange.call(this,!1);var c,d=!0,e=!1;try{for(var f,g,h=this.extensions[Symbol.iterator]();!(d=(f=h.next()).done);d=!0)g=f.value,'function'==typeof g.disabled&&g.disabled.call(g,a),g.constructor.geokb&&g.constructor.globalDisabled.call(g)}catch(a){e=!0,c=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw c}}}}},{key:'_forceEnabled',value:function(){var a=this;this.selectors.forEach(function(b){return a._enable(b)})}},{key:'_focus',value:function(a){this.lastFocus&&a.includes(this.lastFocus.frameElement||this.lastFocus)?this.lastFocus.focus():this.constructor.getContext(a[0]).focus()}},{key:'_loadGlobalExtensions',value:function(){var a=this;this.params.globals.forEach(function(b){var c,d=!1,e=!0,f=!1;try{for(var g,h,i=a.extensions[Symbol.iterator]();!(e=(g=i.next()).done);e=!0)if(h=g.value,h instanceof b[0]){d=!0;break}}catch(a){f=!0,c=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw c}}d||a.extensions.add(Reflect.construct(b[0],[a])),b[0].build(a,b[1])})}}],[{key:'_replaceTyped',value:function(a){!new RegExp(this.constructor.characterSet.join('|')).test(a.key)||1<a.key.length||(a.preventDefault(),this.constructor.extensions.insertAtCaret(a.currentTarget,f(this.constructor.characterSet.indexOf(a.key)+4304)))}},{key:'_replacePasted',value:function(a){var b=this,c=a.clipboardData?a.clipboardData.getData('text/plain'):window.clipboardData?window.clipboardData.getData('Text'):null;this.constructor.extensions.insertAtCaret(a.currentTarget,c.split('').map(function(a){var c=b.constructor.characterSet.indexOf(a);return-1===c?a:f(c+4304)}).join('')),a.preventDefault()}},{key:'_checkFocus',value:function(a){this.lastFocus=a.currentTarget}},{key:'_hotSwitch',value:function(a){(a.keyCode===this.params.hotSwitchKey||a.which===this.params.hotSwitchKey)&&(this.constructor._toggle.call(this,a.currentTarget),a.preventDefault())}},{key:'_toggle',value:function(a){var b=this,c=this.hasListener(a,'replaceOnType');!1===c?'function'==typeof this.params.globalHotSwitch?(this.selectors.forEach(function(c){return b._enable(c,c===a)}),this.params.globalHotSwitch.call(this,!0)):this._enable(a):'function'==typeof this.params.globalHotSwitch?(this.selectors.forEach(function(c){return b._disable(c,c===a)}),this.params.globalHotSwitch.call(this,!1)):this._disable(a)}},{key:'_warnBadSelector',value:function(a){var b=this;a.split(', ').forEach(function(a){if(!document.querySelector(a))return console.warn(b.constructor.name+': An element with identifier \''+a+'\' not found. (Skipping...)'),!0})}},{key:'getContext',value:function(a){return'IFRAME'===a.tagName?(a.contentWindow||a.contentDocument).window:a}},{key:'characterSet',get:function(){return['a','b','g','d','e','v','z','T','i','k','l','m','n','o','p','J','r','s','t','u','f','q','R','y','S','C','c','Z','w','W','x','j','h']}},{key:'opts',get:function(){return'geokeyboard'}}]),a}();a.exports=e},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,a),this.parent=c,d&&(this.selectors=d.split(', ')),this.opts=Object.assign({select:null,focusListenerOnSelect:!0,selectListener:!0,autoSwitch:!0},e)}return c(a,[{key:'redefine',value:function(a,b){this.opts=Object.assign(this.opts,b),this.selectors=this.selectors?Array.from(new Set(this.selectors.concat(a.split(', ')))):a.split(', ')}},{key:'listeners',value:function(){var a=this;if(null!==this.opts.select){var b=[];return this.selectors.forEach(function(c,d){b.push([c,[['focusListenerOnSelect-'+d,'focus',function(b){return a.updateSelectValue.call(a,b)}]]])}),b.push([this.opts.select,[['selectListener','change',function(b){return a.changeHandler.call(a,b)}]]]),b}}},{key:'enabled',value:function(a){if(this.selectors){var b=Array.from(document.querySelectorAll(this.selectors.join(',')));this.opts.autoSwitch&&b.includes(a)&&(document.querySelector(this.opts.select).value='true')}}},{key:'disabled',value:function(a){if(this.selectors){var b=Array.from(document.querySelectorAll(this.selectors.join(',')));this.opts.autoSwitch&&b.includes(a)&&(document.querySelector(this.opts.select).value='false')}}},{key:'changeHandler',value:function(a){var b=this;this.selectors.forEach(function(c){var d=document.querySelector(c),e=JSON.parse(a.currentTarget.value);!0===e?b.parent._enable.call(b.parent,d):b.parent._disable.call(b.parent,d)}),this.parent._focus(document.querySelector(this.selectors))}},{key:'updateSelectValue',value:function(a){document.querySelector(this.opts.select).value=a.currentTarget[this.parent.constructor.opts].replaceOnType.toString()}}],[{key:'build',value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.geokb=b,a.params||(a.params={select:null,focusListener:!0,autoSwitch:!0}),a.params=Object.assign(a.params,c);var d=document.querySelector(a.params.select);d.addEventListener('change',function(a){b.selectors.forEach(function(c){return'true'===a.currentTarget.value?b._enable(c):b._disable(c)}),b._focus(b.selectors)}),b.selectors.forEach(function(c){c.addEventListener('focus',function(c){document.querySelector(a.params.select).value=c.currentTarget[b.constructor.opts].replaceOnType?'true':'false'})}),b.params.forceEnabled&&a.globalEnabled(!0)}},{key:'globalEnabled',value:function(b){(a.params.autoSwitch||b)&&(document.querySelector(a.params.select).value='true')}},{key:'globalDisabled',value:function(b){(a.params.autoSwitch||b)&&(document.querySelector(a.params.select).value='false')}}]),a}();a.exports=d},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,a),this.parent=c,d&&(this.selectors=d.split(', ')),this.lastFocus=null,this.opts=Object.assign({checkbox:null,focusListenerOnCheckbox:!0,checkboxListener:!0,autoSwitch:!0},e)}return c(a,[{key:'changeHandler',value:function(a){var b=this;this.selectors.forEach(function(c){var d=document.querySelector(c);!0===a.currentTarget.checked?b.parent._enable.call(b.parent,d):b.parent._disable.call(b.parent,d)}),this.parent._focus(document.querySelector(this.selectors))}},{key:'updateCheckbox',value:function(a){a.currentTarget.checked=a.currentTarget[this.parent.constructor.opts].replaceOnType}},{key:'redefine',value:function(a,b){this.opts=Object.assign(this.opts,b),this.selectors=this.selectors?Array.from(new Set(this.selectors.concat(a.split(', ')))):a.split(', ')}},{key:'listeners',value:function(){var a=this;if(null!==this.opts.checkbox){var b=[];return this.selectors.forEach(function(c,d){b.push([c,[['focusListenerOnCheckbox-'+d,'focus',function(b){return a.updateCheckbox.call(a,b)}]]])}),b.push([this.opts.checkbox,[['checkboxListener','change',function(b){return a.changeHandler.call(a,b)}]]]),b}}},{key:'enabled',value:function(a){if(this.selectors){var b=Array.from(document.querySelectorAll(this.selectors.join(',')));this.opts.autoSwitch&&b.includes(a)&&(document.querySelector(this.opts.checkbox).checked=!0)}}},{key:'disabled',value:function(a){if(this.selectors){var b=Array.from(document.querySelectorAll(this.selectors.join(',')));this.opts.autoSwitch&&b.includes(a)&&(document.querySelector(this.opts.checkbox).checked=!1)}}}],[{key:'build',value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.geokb=b,a.params||(a.params={checkbox:null,focusListener:!0,autoSwitch:!0}),a.params=Object.assign(a.params,c);var d=document.querySelector(a.params.checkbox);d.addEventListener('change',function(a){b.selectors.forEach(function(c){return a.currentTarget.checked?b._enable(c):b._disable(c)}),b._focus(b.selectors)}),b.selectors.forEach(function(a){a.addEventListener('focus',function(a){a.currentTarget.checked=a.target.replaceOnType})}),b.params.forceEnabled&&a.globalEnabled(!0)}},{key:'globalEnabled',value:function(b){(a.params.autoSwitch||b)&&(document.querySelector(a.params.checkbox).checked=!0)}},{key:'globalDisabled',value:function(b){(a.params.autoSwitch||b)&&(document.querySelector(a.params.checkbox).checked=!1)}}]),a}();a.exports=d},function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var c=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(){function a(c){b(this,a),this.parent=c}return c(a,null,[{key:'build',value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a.geokb=b,a.params=Object.assign({key:'geokeyboard'},c),a._load.call(a)}},{key:'globalEnabled',value:function(){console.log('enabled'),localStorage.setItem(this.constructor.params.key,!0)}},{key:'globalDisabled',value:function(){console.log('disabled!!!!'),localStorage.setItem(this.constructor.params.key,!1)}},{key:'_load',value:function(){var a=this;if(!this.geokb.params.forceEnabled){var b=JSON.parse(localStorage.getItem(this.params.key));null===b||this.geokb.selectors.forEach(function(c){return b?a.geokb._enable(c):a.geokb._disable(c)})}}}]),a}();a.exports=d},function(a){'use strict';a.exports=function(a,b){var c=a.tagName||a.frameElement.tagName;if('DIV'===c||'IFRAME'===c){var d,e,f=window,g=document;if('IFRAME'===c&&(f=a.window,g=a.document),!f.getSelection)g.selection&&'Control'!==g.selection.type&&g.selection.createRange().pasteHTML(b);else if(d=f.getSelection(),d.getRangeAt&&d.rangeCount){e=d.getRangeAt(0),e.deleteContents();var h=g.createElement('DIV');h.innerHTML=b;for(var i,j,k=g.createDocumentFragment();i=h.firstChild;)j=k.appendChild(i);e.insertNode(k),j&&(e=e.cloneRange(),e.setStartAfter(j),e.collapse(!0),d.removeAllRanges(),d.addRange(e))}}else if('INPUT'===c||'TEXTAREA'===c)if('number'==typeof a.selectionStart&&'number'==typeof a.selectionEnd){var l=a.selectionStart;a.value=a.value.slice(0,l)+b+a.value.slice(a.selectionEnd),a.selectionStart=a.selectionEnd=l+1,a.blur(),a.focus()}else{var m=document.selection.createRange(),n=a.value.replace(/\r\n/g,'\n'),o=a.createTextRange();o.moveToBookmark(m.getBookmark());var p=a.createTextRange();p.collapse(!1);var q,r;-1<o.compareEndPoints('StartToEnd',p)?q=r=charLength:(q=-o.moveStart('character',-charLength),q+=n.slice(0,q).split('\n').length-1,-1<o.compareEndPoints('EndToEnd',p)?r=charLength:(r=-o.moveEnd('character',-charLength),r+=n.slice(0,r).split('\n').length-1)),a.value=a.value.slice(0,q)+b+a.value.slice(r),o=a.createTextRange(),o.collapse(!0)}}}]);
//# sourceMappingURL=geokeyboard.min.js.map