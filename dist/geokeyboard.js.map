{"version":3,"sources":["webpack:///webpack/bootstrap 2c8a63a49d4a69e51ada","webpack:///./src/main.js","webpack:///./src/geokeyboard.js","webpack:///./src/geokeyboard.select.js","webpack:///./src/geokeyboard.checkbox.js","webpack:///./src/geokeyboard.localstorage.js","webpack:///./src/insert-at-caret.js"],"names":["Geokeyboard","require","Select","Checkbox","LocalStorage","insertAtCaret","extensions","window","selectors","params","opts","Set","lastFocus","Object","assign","hotSwitchKey","globalHotSwitch","forceEnabled","globals","listen","_forceEnabled","_loadGlobalExtensions","callback","constructor","_warnBadSelector","Array","from","document","querySelectorAll","forEach","selector","getContext","replaceOnType","hotSwitch","onChange","checkFocus","listeners","toggleListener","_replaceTyped","call","e","_replacePasted","_hotSwitch","_checkFocus","concat","ext","inst","i","Reflect","construct","redefine","add","l","querySelector","el","extOpts","reduce","acc","c","listener","type","fn","useCapture","index","hasListener","split","addListener","removeListener","push","addEventListener","getListener","removeEventListener","splice","findIndex","f","find","undefined","enabled","geokb","globalEnabled","disabled","globalDisabled","_enable","s","among","includes","frameElement","focus","found","instance","build","RegExp","characterSet","join","test","key","length","preventDefault","currentTarget","String","fromCharCode","indexOf","content","clipboardData","getData","map","keyCode","which","_toggle","_disable","console","warn","name","tagName","contentWindow","contentDocument","module","exports","parent","select","focusListenerOnSelect","selectListener","autoSwitch","schema","updateSelectValue","changeHandler","value","JSON","parse","_focus","toString","focusListener","globalSelect","force","checkbox","focusListenerOnCheckbox","checkboxListener","checked","updateCheckbox","globalCheckbox","target","_load","log","localStorage","setItem","state","getItem","element","sel","range","windowContext","documentContext","getSelection","getRangeAt","rangeCount","deleteContents","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","selection","createRange","pasteHTML","selectionStart","selectionEnd","start","slice","blur","normal","replace","textInputRange","createTextRange","moveToBookmark","getBookmark","endRange","end","compareEndPoints","charLength","moveStart","moveEnd"],"mappings":"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","file":"geokeyboard.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c8a63a49d4a69e51ada","const Geokeyboard = require('./geokeyboard');\nconst Select = require('./geokeyboard.select.js');\nconst Checkbox = require('./geokeyboard.checkbox.js');\nconst LocalStorage = require('./geokeyboard.localstorage.js');\nconst insertAtCaret = require('./insert-at-caret');\n\nGeokeyboard.extensions = { Select, Checkbox, LocalStorage, insertAtCaret };\n\nwindow.Geokeyboard = Geokeyboard;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","class Geokeyboard {\n    constructor(selectors, params={}, opts={}) {\n        this.selectors = [];\n        this.extensions = new Set;\n        this.lastFocus = null;\n\n        this.params = Object.assign({\n            hotSwitchKey: 96,\n            globalHotSwitch: null,\n            forceEnabled: false,\n            globals: []\n        }, params);\n\n        this.listen(selectors, opts);\n\n        if (this.params.forceEnabled) {\n            this._forceEnabled();\n        }\n\n        this._loadGlobalExtensions();\n    }\n\n    listen(selectors, opts={}, callback=null) {\n        this.constructor._warnBadSelector(selectors);\n\n        selectors = Array.from(document.querySelectorAll(selectors));\n\n        selectors.forEach(selector => {\n            selector = this.constructor.getContext(selector);\n\n            if (!selector[this.constructor.opts]) {\n                selector[this.constructor.opts] = {\n                    replaceOnType: true,\n                    hotSwitch: true,\n                    onChange: null,\n                    checkFocus: true,\n                    listeners: [],\n                };\n            }\n            selector[this.constructor.opts] = Object.assign(selector[this.constructor.opts], opts);\n\n            this.toggleListener(selector, 'replaceOnType', 'keypress', e => {\n                this.constructor._replaceTyped.call(this, e);\n            });\n\n            this.toggleListener(selector, 'replaceOnPaste', 'paste', e => {\n                this.constructor._replacePasted.call(this, e);\n            });\n\n            this.toggleListener(selector, 'hotSwitch', 'keypress', e => {\n                this.constructor._hotSwitch.call(this, e);\n            });\n\n            this.toggleListener(selector, 'checkFocus', 'focus', e => {\n                this.constructor._checkFocus.call(this, e);\n            }, true);\n        });\n\n        this.selectors = Array.from(new Set(this.selectors.concat(selectors)));\n\n        if (callback) {\n            callback.call(this, selectors);\n        }\n\n        this._loadGlobalExtensions();\n\n        return this;\n    }\n\n    attach(ext, params, opts={}) {\n        let inst;\n        for (let i of this.extensions) {\n            if (i instanceof ext) {\n                inst = i;\n                break;\n            }\n        }\n        if (!inst) {\n            inst = Reflect.construct(ext, [this, params, opts]);\n        } else {\n            inst.redefine(params, opts);\n        }\n        this.extensions.add(inst);\n\n        const l = inst.listeners();\n        if (!l) {\n            return;\n        }\n\n        l.forEach(el => {\n            let selector = document.querySelector(el[0]);\n\n            let extOpts = el[1].reduce((acc, c) => Object.assign(acc, {[c[0]]: true}), {listeners: []});\n\n            if (!selector[this.constructor.opts]) {\n                selector[this.constructor.opts] = extOpts;\n            } else {\n                selector[this.constructor.opts] = Object.assign(extOpts, selector[this.constructor.opts]);\n            }\n            selector[this.constructor.opts] = Object.assign(selector[this.constructor.opts], inst.opts);\n\n            el[1].forEach(l => {\n                this.toggleListener(selector, l[0], l[1], l[2]);\n            });\n\n            this.selectors = Array.from(new Set(this.selectors.concat([selector])));\n        });\n\n        return this;\n    }\n\n    toggleListener(selector, listener, type, fn, useCapture=false) {\n        const index = this.hasListener(selector, listener);\n\n        if (selector[this.constructor.opts][listener.split('-')[0]]) {\n            if (index === false) {\n                this.addListener(selector, listener, type, fn, useCapture)\n            }\n        } else {\n            if (index !== false) {\n                this.removeListener(selector, listener, type, useCapture);\n            }\n        }\n    }\n\n    addListener(selector, listener, type, fn) {\n        const hasListener = this.hasListener(selector, listener);\n        if (hasListener === false) {\n            selector[this.constructor.opts].listeners.push({[listener]: fn});\n        }\n        selector.addEventListener(type, this.getListener(selector, listener));\n    }\n\n    removeListener(selector, listener, type) {\n        selector.removeEventListener(type, this.getListener(selector, listener));\n        selector[this.constructor.opts].listeners.splice(this.hasListener(selector, listener), 1);\n    }\n\n    hasListener(selector, listener) {\n        const index = selector[this.constructor.opts].listeners.findIndex(f => typeof f[listener] === 'function');\n        return index === -1 ? false : index;\n    }\n\n\n    getListener(selector, listener) {\n        const l = selector[this.constructor.opts].listeners.find(f => f[listener]);\n        if (!l) {\n            //console.warn(`No such listener as '${listener}' for '${selector.outerHTML}'`);\n        }\n        return l ? l[listener] : undefined;\n    }\n\n    _enable(selector) {\n        selector = this.constructor.getContext(selector);\n        selector[this.constructor.opts].replaceOnType = true;\n\n        this.addListener(selector, 'replaceOnType', 'keypress', e => {\n            this.constructor._replaceTyped.call(this, e);\n        });\n\n        if (selector[this.constructor.opts]['onChange']) {\n            selector[this.constructor.opts]['onChange'].call(this, true);\n        }\n\n        for (let ext of this.extensions) {\n            if (typeof ext.enabled === 'function') {\n                ext.enabled.call(ext, selector);\n            }\n            if (ext.constructor.geokb) {\n                ext.constructor.globalEnabled.call(ext);\n            }\n        }\n    }\n\n    _disable(selector) {\n        selector = this.constructor.getContext(selector);\n        selector[this.constructor.opts].replaceOnType = false;\n\n        const listener = this.getListener(selector, 'replaceOnType');\n        if (!listener) {\n            return;\n        }\n\n        this.removeListener(selector, 'replaceOnType', 'keypress', listener);\n\n        if (selector[this.constructor.opts]['onChange']) {\n            selector[this.constructor.opts]['onChange'].call(this, false);\n        }\n\n        for (let ext of this.extensions) {\n            if (typeof ext.disabled === 'function') {\n                ext.disabled.call(ext, selector);\n            }\n            if (ext.constructor.geokb) {\n                ext.constructor.globalDisabled.call(ext);\n            }\n        }\n    }\n\n    _forceEnabled() {\n        this.selectors.forEach(s => this._enable(s));\n    }\n\n    static _replaceTyped(e) {\n        if (!new RegExp(this.constructor.characterSet.join('|')).test(e.key) || e.key.length > 1) {\n            return;\n        }\n        e.preventDefault();\n\n        this.constructor.extensions.insertAtCaret(e.currentTarget, String.fromCharCode(\n            this.constructor.characterSet.indexOf(e.key) + 4304)\n        );\n    }\n\n    static _replacePasted(e) {\n        let content = e.clipboardData ? e.clipboardData.getData('text/plain') : window.clipboardData ?\n            window.clipboardData.getData('Text') : null;\n\n        this.constructor.extensions.insertAtCaret(e.currentTarget, content.split('')\n            .map(c => {\n                let index = this.constructor.characterSet.indexOf(c);\n                return index !== -1 ? String.fromCharCode(index + 4304) : c;\n            })\n            .join(''));\n\n        e.preventDefault();\n    }\n\n    static _checkFocus(e) {\n        this.lastFocus = e.currentTarget;\n    }\n\n    _focus(among) {\n        if (this.lastFocus && among.includes(this.lastFocus.frameElement || this.lastFocus)) {\n            this.lastFocus.focus();\n        } else {\n            this.constructor.getContext(among[0]).focus();\n        }\n    }\n\n    static _hotSwitch(e) {\n        if (e.keyCode === this.params.hotSwitchKey || e.which === this.params.hotSwitchKey) {\n            this.constructor._toggle.call(this, e.currentTarget);\n            e.preventDefault();\n        }\n    }\n\n    static _toggle(selector) {\n        const index = this.hasListener(selector, 'replaceOnType');\n\n        if (index !== false) {\n            if (typeof this.params.globalHotSwitch === 'function') {\n                this.selectors.forEach(s => this._disable(s, s === selector));\n                this.params.globalHotSwitch.call(this, false);\n            } else {\n                this._disable(selector);\n            }\n        } else {\n            if (typeof this.params.globalHotSwitch === 'function') {\n                this.selectors.forEach(s => this._enable(s, s === selector));\n                this.params.globalHotSwitch.call(this, true);\n            } else {\n                this._enable(selector);\n            }\n        }\n    }\n\n    _loadGlobalExtensions() {\n        this.params.globals.forEach(ext => {\n            let found = false;\n            for (let instance of this.extensions) {\n                if (instance instanceof ext[0]) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                this.extensions.add(Reflect.construct(ext[0], [this]));\n            }\n            ext[0].build(this, ext[1]);\n        });\n    }\n\n    static _warnBadSelector(selectors) {\n        selectors.split(', ').forEach(selector => {\n            if (!document.querySelector(selector)) {\n                console\n                    .warn(`${this.constructor.name}: An element with identifier '${selector}' not found. (Skipping...)`);\n                return true;\n            }\n        });\n    }\n\n    static get characterSet() {\n        return 'abgdevzTiklmnopJrstufqRySCcZwWxjh'.split('');\n    }\n\n    static getContext(selector) {\n        return (selector.tagName === 'IFRAME') ?\n            (selector.contentWindow || selector.contentDocument).window : selector;\n    }\n\n    static get opts() {\n        return 'geokeyboard';//this.constructor.name;\n    }\n}\n\nmodule.exports = Geokeyboard;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.js","class Select {\n    constructor(parent, selectors=null, opts={}) {\n        this.parent = parent;\n\n        if (selectors) {\n            this.selectors = selectors.split(', ');\n        }\n\n        this.opts = Object.assign({\n            select: null,\n            focusListenerOnSelect: true,\n            selectListener: true,\n            autoSwitch: true,\n        }, opts);\n    }\n\n    redefine(selectors, opts) {\n        this.opts = Object.assign(this.opts, opts);\n        if (this.selectors) {\n            this.selectors = Array.from(new Set(this.selectors.concat(selectors.split(', '))));\n        } else {\n            this.selectors = selectors.split(', ');\n        }\n    }\n\n    listeners() {\n        if (this.opts.select === null) {\n            return;\n        }\n\n        const schema = [];\n\n        this.selectors.forEach((s,i) => {\n            schema.push([s, [\n                ['focusListenerOnSelect-'+i, 'focus', e => this.updateSelectValue.call(this, e)]\n            ]]);\n        });\n\n        schema.push([this.opts.select, [\n            ['selectListener', 'change', e => this.changeHandler.call(this, e)]\n        ]]);\n\n        return schema;\n    }\n\n    enabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.select).value = 'true';\n        }\n    }\n\n    disabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.select).value = 'false';\n        }\n    }\n\n    changeHandler(e) {\n        this.selectors.forEach(s => {\n            const selector = document.querySelector(s);\n            const value = JSON.parse(e.currentTarget.value);\n\n            if (value === true) {\n                this.parent._enable.call(this.parent, selector);\n            } else {\n                this.parent._disable.call(this.parent, selector);\n            }\n        });\n\n\n        this.parent._focus(document.querySelector(this.selectors));\n    }\n\n    updateSelectValue(e) {\n        document.querySelector(this.opts.select).value = e.currentTarget[this.parent.constructor.opts].replaceOnType\n            .toString();\n    }\n\n    // For global usage\n    static build(geokb, params={}) {\n        Select.geokb = geokb;\n\n        if (!Select.params) {\n            Select.params = {\n                select: null,\n                focusListener: true,\n                autoSwitch: true\n            }\n        }\n        Select.params = Object.assign(Select.params, params);\n\n        const globalSelect = document.querySelector(Select.params.select);\n\n        globalSelect.addEventListener('change', (e) => {\n            geokb.selectors.forEach(s => e.currentTarget.value === 'true' ? geokb._enable(s) : geokb._disable(s));\n            geokb._focus(geokb.selectors);\n        });\n\n        geokb.selectors.forEach(s => {\n           s.addEventListener('focus', (e) => {\n               if (e.currentTarget[geokb.constructor.opts].replaceOnType) {\n                   document.querySelector(Select.params.select).value = 'true';\n               } else {\n                   document.querySelector(Select.params.select).value = 'false';\n               }\n           });\n        });\n\n        if (geokb.params.forceEnabled) {\n            Select.globalEnabled(true);\n        }\n    }\n\n    static globalEnabled(force) {\n        if (Select.params.autoSwitch || force) {\n            document.querySelector(Select.params.select).value = 'true';\n        }\n    }\n\n    static globalDisabled(force) {\n        if (Select.params.autoSwitch || force) {\n            document.querySelector(Select.params.select).value = 'false';\n        }\n    }\n}\n\nmodule.exports = Select;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.select.js","class Checkbox {\n    constructor(parent, selectors=null, opts={}) {\n        this.parent = parent;\n\n        if (selectors) {\n            this.selectors = selectors.split(', ');\n        }\n\n        this.lastFocus = null;\n        this.opts = Object.assign({\n            checkbox: null,\n            focusListenerOnCheckbox: true,\n            checkboxListener: true,\n            autoSwitch: true,\n        }, opts);\n    }\n\n    changeHandler(e) {\n        this.selectors.forEach(s => {\n            const selector = document.querySelector(s);\n\n            if (e.currentTarget.checked === true) {\n                this.parent._enable.call(this.parent, selector);\n            } else {\n                this.parent._disable.call(this.parent, selector);\n            }\n        });\n\n        this.parent._focus(document.querySelector(this.selectors));\n    }\n\n    updateCheckbox(e) {\n        e.currentTarget.checked = e.currentTarget[this.parent.constructor.opts].replaceOnType;\n    }\n\n    // For local usage\n    redefine(selectors, opts) {\n        this.opts = Object.assign(this.opts, opts);\n        if (this.selectors) {\n            this.selectors = Array.from(new Set(this.selectors.concat(selectors.split(', '))));\n        } else {\n            this.selectors = selectors.split(', ');\n        }\n    }\n\n    listeners() {\n        if (this.opts.checkbox === null) {\n            return;\n        }\n\n        const schema = [];\n\n        this.selectors.forEach((s,i) => {\n            schema.push([s, [\n                ['focusListenerOnCheckbox-'+i, 'focus', e => this.updateCheckbox.call(this, e)]\n            ]]);\n        });\n\n        schema.push([this.opts.checkbox, [\n            ['checkboxListener', 'change', e => this.changeHandler.call(this, e)]\n        ]]);\n\n        return schema;\n    }\n\n    enabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.checkbox).checked = true;\n        }\n    }\n\n    disabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.checkbox).checked = false;\n        }\n    }\n\n    // For global usage\n    static build(geokb, params={}) {\n        Checkbox.geokb = geokb;\n\n        if (!Checkbox.params) {\n            Checkbox.params = {\n                checkbox: null,\n                focusListener: true,\n                autoSwitch: true\n            };\n        }\n        Checkbox.params = Object.assign(Checkbox.params, params);\n\n        const globalCheckbox = document.querySelector(Checkbox.params.checkbox);\n\n        globalCheckbox.addEventListener('change', (e) => {\n            geokb.selectors.forEach(s => e.currentTarget.checked ? geokb._enable(s) : geokb._disable(s));\n            geokb._focus(geokb.selectors);\n        });\n\n        geokb.selectors.forEach(s => {\n            s.addEventListener('focus', (e) => {\n                e.currentTarget.checked = e.target.replaceOnType;\n            });\n        });\n\n        if (geokb.params.forceEnabled) {\n            Checkbox.globalEnabled(true);\n        }\n    }\n\n    static globalEnabled(force) {\n        if (Checkbox.params.autoSwitch || force) {\n            document.querySelector(Checkbox.params.checkbox).checked = true;\n        }\n    }\n\n    static globalDisabled(force) {\n        if (Checkbox.params.autoSwitch || force) {\n            document.querySelector(Checkbox.params.checkbox).checked = false;\n        }\n    }\n}\n\nmodule.exports = Checkbox;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.checkbox.js","class LocalStorage {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    // For global usage\n    static build(geokb, params={}) {\n        LocalStorage.geokb = geokb;\n\n        LocalStorage.params = Object.assign({\n            key: 'geokeyboard',\n        }, params);\n\n        LocalStorage._load.call(LocalStorage);\n    }\n\n    static globalEnabled() {\n        console.log('enabled');\n        localStorage.setItem(this.constructor.params.key, true);\n    }\n\n    static globalDisabled() {\n        console.log('disabled!!!!');\n        localStorage.setItem(this.constructor.params.key, false);\n    }\n\n    static _load() {\n        if (this.geokb.params.forceEnabled) {\n            return;\n        }\n\n        const state = JSON.parse(localStorage.getItem(this.params.key));\n\n        if (state === null) {\n            return;\n        }\n\n        this.geokb.selectors.forEach(s => {\n            return state ? this.geokb._enable(s) : this.geokb._disable(s);\n        });\n    }\n}\n\nmodule.exports = LocalStorage;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.localstorage.js","const insertAtCaret = (element, content) => {\n    const tagName = (element.tagName || element.frameElement.tagName);\n\n    if (tagName === 'DIV' || tagName === 'IFRAME') {\n        let sel, range;\n\n        let windowContext = window, documentContext = document;\n        if (tagName === 'IFRAME') {\n            windowContext = element.window;\n            documentContext = element.document;\n        }\n\n        if (windowContext.getSelection) {\n            sel = windowContext.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n\n                let el = documentContext.createElement('DIV');\n                el.innerHTML = content;\n                let frag = documentContext.createDocumentFragment(), node, lastNode;\n                while ((node = el.firstChild)) {\n                    lastNode = frag.appendChild(node);\n                }\n                range.insertNode(frag);\n\n                if (lastNode) {\n                    range = range.cloneRange();\n                    range.setStartAfter(lastNode);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n            }\n        } else if (documentContext.selection && documentContext.selection.type !== 'Control') {\n            documentContext.selection.createRange().pasteHTML(content);\n        }\n    } else if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n        if (typeof element.selectionStart === 'number' && typeof element.selectionEnd === 'number') {\n            const start = element.selectionStart;\n            element.value = element.value.slice(0, start) + content + element.value.slice(element.selectionEnd);\n            element.selectionStart = element.selectionEnd = start + 1;\n            element.blur();\n            element.focus();\n        } else {\n            const range = document.selection.createRange();\n            let normal = element.value.replace(/\\r\\n/g, '\\n');\n\n            let textInputRange = element.createTextRange();\n            textInputRange.moveToBookmark(range.getBookmark());\n\n            let endRange = element.createTextRange();\n            endRange.collapse(false);\n\n            let start, end;\n            if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\n                start = end = charLength;\n            } else {\n                start = -textInputRange.moveStart('character', -charLength);\n                start += normal.slice(0, start).split('\\n').length - 1;\n\n                if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\n                    end = charLength;\n                } else {\n                    end = -textInputRange.moveEnd('character', -charLength);\n                    end += normal.slice(0, end).split('\\n').length - 1;\n                }\n            }\n\n            element.value = element.value.slice(0, start) + content + element.value.slice(end);\n            //start++;\n\n            textInputRange = element.createTextRange();\n            textInputRange.collapse(true);\n        }\n    }\n};\n\nmodule.exports = insertAtCaret;\n\n\n// WEBPACK FOOTER //\n// ./src/insert-at-caret.js"],"sourceRoot":""}