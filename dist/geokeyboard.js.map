{"version":3,"sources":["webpack:///webpack/bootstrap 7770483021d63bb85eaf","webpack:///./src/main.js","webpack:///./src/geokeyboard.js","webpack:///./src/geokeyboard.select.js","webpack:///./src/geokeyboard.checkbox.js","webpack:///./src/geokeyboard.localstorage.js","webpack:///./src/insert-at-caret.js"],"names":["Geokeyboard","require","Select","Checkbox","LocalStorage","insertAtCaret","extensions","window","selectors","params","opts","Set","lastFocus","Object","assign","hotSwitchKey","globalHotSwitch","forceEnabled","globals","listen","_forceEnabled","_loadGlobalExtensions","Symbol","call","constructor","callback","_warnBadSelector","Array","from","document","querySelectorAll","forEach","selector","getContext","replaceOnType","hotSwitch","onChange","checkFocus","listeners","toggleListener","_replaceTyped","e","_replacePasted","_hotSwitch","_checkFocus","concat","ext","instance","i","Reflect","construct","redefine","add","querySelector","element","extOpts","reduce","acc","c","details","listener","type","fn","useCapture","index","hasListener","split","addListener","removeListener","push","addEventListener","getListener","removeEventListener","splice","findIndex","f","l","find","undefined","enabled","geokb","globalEnabled","disabled","globalDisabled","_enable","s","among","includes","frameElement","focus","found","build","RegExp","characterSet","join","test","key","length","preventDefault","currentTarget","String","fromCharCode","indexOf","content","clipboardData","getData","map","keyCode","which","_toggle","_disable","console","warn","name","tagName","contentWindow","contentDocument","module","exports","parent","select","focusListenerOnSelect","selectListener","autoSwitch","schema","updateSelectValue","changeHandler","value","_focus","toString","focusListener","globalSelect","force","checkbox","focusListenerOnCheckbox","checkboxListener","checked","updateCheckbox","globalCheckbox","target","_load","localStorage","setItem","state","JSON","parse","getItem","sel","range","windowContext","documentContext","getSelection","getRangeAt","rangeCount","deleteContents","el","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","selection","createRange","pasteHTML","selectionStart","selectionEnd","start","slice","blur","normal","replace","textInputRange","createTextRange","moveToBookmark","getBookmark","endRange","end","compareEndPoints","charLength","moveStart","moveEnd"],"mappings":"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","file":"geokeyboard.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7770483021d63bb85eaf","const Geokeyboard = require('./geokeyboard');\nconst Select = require('./geokeyboard.select.js');\nconst Checkbox = require('./geokeyboard.checkbox.js');\nconst LocalStorage = require('./geokeyboard.localstorage.js');\nconst insertAtCaret = require('./insert-at-caret');\n\nGeokeyboard.extensions = { Select, Checkbox, LocalStorage, insertAtCaret };\n\nwindow.Geokeyboard = Geokeyboard;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","class Geokeyboard {\n    constructor(selectors, params={}, opts={}) {\n        this.selectors = [];\n        this.extensions = new Set;\n        this.lastFocus = null;\n\n        this.params = Object.assign({\n            hotSwitchKey: 96,\n            globalHotSwitch: null,\n            forceEnabled: false,\n            globals: []\n        }, params);\n\n        this.listen(selectors, opts);\n\n        if (this.params.forceEnabled) {\n            this._forceEnabled();\n        }\n\n        this._loadGlobalExtensions();\n    }\n\n    [Symbol.call](selectors, params={}, opts={}) {\n        return new this.constructor(selectors, params, opts);\n    }\n\n    listen(selectors, opts={}, callback=null) {\n        this.constructor._warnBadSelector(selectors);\n\n        selectors = Array.from(document.querySelectorAll(selectors));\n\n        selectors.forEach(selector => {\n            selector = this.constructor.getContext(selector);\n\n            if (!selector[this.constructor.opts]) {\n                selector[this.constructor.opts] = {\n                    replaceOnType: true,\n                    hotSwitch: true,\n                    onChange: null,\n                    checkFocus: true,\n                    listeners: [],\n                };\n            }\n            selector[this.constructor.opts] = Object.assign(selector[this.constructor.opts], opts);\n\n            this.toggleListener(selector, 'replaceOnType', 'keypress', e => {\n                this.constructor._replaceTyped.call(this, e);\n            });\n\n            this.toggleListener(selector, 'replaceOnPaste', 'paste', e => {\n                this.constructor._replacePasted.call(this, e);\n            });\n\n            this.toggleListener(selector, 'hotSwitch', 'keypress', e => {\n                this.constructor._hotSwitch.call(this, e);\n            });\n\n            this.toggleListener(selector, 'checkFocus', 'focus', e => {\n                this.constructor._checkFocus.call(this, e);\n            }, true);\n        });\n\n        this.selectors = Array.from(new Set(this.selectors.concat(selectors)));\n\n        if (callback) {\n            callback.call(this, selectors);\n        }\n\n        this._loadGlobalExtensions();\n\n        return this;\n    }\n\n    attach(ext, params, opts={}) {\n        let instance;\n        for (let i of this.extensions) {\n            if (i instanceof ext) {\n                instance = i;\n                break;\n            }\n        }\n        if (!instance) {\n            instance = Reflect.construct(ext, [this, params, opts]);\n        } else {\n            instance.redefine(params, opts);\n        }\n        this.extensions.add(instance);\n\n        const listeners = instance.listeners();\n        if (!listeners) {\n            return;\n        }\n\n        listeners.forEach(element => {\n            let selector = document.querySelector(element[0]);\n\n            let extOpts = element[1].reduce((acc, c) => Object.assign(acc, {[c[0]]: true}), {listeners: []});\n\n            if (!selector[this.constructor.opts]) {\n                selector[this.constructor.opts] = extOpts;\n            } else {\n                selector[this.constructor.opts] = Object.assign(extOpts, selector[this.constructor.opts]);\n            }\n            selector[this.constructor.opts] = Object.assign(selector[this.constructor.opts], instance.opts);\n\n            element[1].forEach(details => {\n                this.toggleListener(selector, details[0], details[1], details[2]);\n            });\n\n            this.selectors = Array.from(new Set(this.selectors.concat([selector])));\n        });\n\n        return this;\n    }\n\n    toggleListener(selector, listener, type, fn, useCapture=false) {\n        const index = this.hasListener(selector, listener);\n\n        if (selector[this.constructor.opts][listener.split('-')[0]]) {\n            if (index === false) {\n                this.addListener(selector, listener, type, fn, useCapture)\n            }\n        } else {\n            if (index !== false) {\n                this.removeListener(selector, listener, type, useCapture);\n            }\n        }\n    }\n\n    addListener(selector, listener, type, fn) {\n        const hasListener = this.hasListener(selector, listener);\n        if (hasListener === false) {\n            selector[this.constructor.opts].listeners.push({[listener]: fn});\n        }\n        selector.addEventListener(type, this.getListener(selector, listener));\n    }\n\n    removeListener(selector, listener, type) {\n        selector.removeEventListener(type, this.getListener(selector, listener));\n        selector[this.constructor.opts].listeners.splice(this.hasListener(selector, listener), 1);\n    }\n\n    hasListener(selector, listener) {\n        const index = selector[this.constructor.opts].listeners.findIndex(f => typeof f[listener] === 'function');\n        return index === -1 ? false : index;\n    }\n\n\n    getListener(selector, listener) {\n        const l = selector[this.constructor.opts].listeners.find(f => f[listener]);\n        return l ? l[listener] : undefined;\n    }\n\n    _enable(selector) {\n        selector = this.constructor.getContext(selector);\n        selector[this.constructor.opts].replaceOnType = true;\n\n        this.addListener(selector, 'replaceOnType', 'keypress', e => {\n            this.constructor._replaceTyped.call(this, e);\n        });\n\n        if (selector[this.constructor.opts]['onChange']) {\n            selector[this.constructor.opts]['onChange'].call(this, true);\n        }\n\n        for (let ext of this.extensions) {\n            if (typeof ext.enabled === 'function') {\n                ext.enabled.call(ext, selector);\n            }\n            if (ext.constructor.geokb) {\n                ext.constructor.globalEnabled.call(ext);\n            }\n        }\n    }\n\n    _disable(selector) {\n        selector = this.constructor.getContext(selector);\n        selector[this.constructor.opts].replaceOnType = false;\n\n        const listener = this.getListener(selector, 'replaceOnType');\n        if (!listener) {\n            return;\n        }\n\n        this.removeListener(selector, 'replaceOnType', 'keypress', listener);\n\n        if (selector[this.constructor.opts]['onChange']) {\n            selector[this.constructor.opts]['onChange'].call(this, false);\n        }\n\n        for (let ext of this.extensions) {\n            if (typeof ext.disabled === 'function') {\n                ext.disabled.call(ext, selector);\n            }\n            if (ext.constructor.geokb) {\n                ext.constructor.globalDisabled.call(ext);\n            }\n        }\n    }\n\n    _forceEnabled() {\n        this.selectors.forEach(s => this._enable(s));\n    }\n\n    static _replaceTyped(e) {\n        if (!new RegExp(this.constructor.characterSet.join('|')).test(e.key) || e.key.length > 1) {\n            return;\n        }\n        e.preventDefault();\n\n        this.constructor.extensions.insertAtCaret(e.currentTarget, String.fromCharCode(\n            this.constructor.characterSet.indexOf(e.key) + 4304)\n        );\n    }\n\n    static _replacePasted(e) {\n        let content = e.clipboardData ? e.clipboardData.getData('text/plain') : window.clipboardData ?\n            window.clipboardData.getData('Text') : null;\n\n        this.constructor.extensions.insertAtCaret(e.currentTarget, content.split('')\n            .map(c => {\n                let index = this.constructor.characterSet.indexOf(c);\n                return index !== -1 ? String.fromCharCode(index + 4304) : c;\n            })\n            .join(''));\n\n        e.preventDefault();\n    }\n\n    static _checkFocus(e) {\n        this.lastFocus = e.currentTarget;\n    }\n\n    _focus(among) {\n        if (this.lastFocus && among.includes(this.lastFocus.frameElement || this.lastFocus)) {\n            this.lastFocus.focus();\n        } else {\n            this.constructor.getContext(among[0]).focus();\n        }\n    }\n\n    static _hotSwitch(e) {\n        if (e.keyCode === this.params.hotSwitchKey || e.which === this.params.hotSwitchKey) {\n            this.constructor._toggle.call(this, e.currentTarget);\n            e.preventDefault();\n        }\n    }\n\n    static _toggle(selector) {\n        const index = this.hasListener(selector, 'replaceOnType');\n\n        if (index !== false) {\n            if (typeof this.params.globalHotSwitch === 'function') {\n                this.selectors.forEach(s => this._disable(s, s === selector));\n                this.params.globalHotSwitch.call(this, false);\n            } else {\n                this._disable(selector);\n            }\n        } else {\n            if (typeof this.params.globalHotSwitch === 'function') {\n                this.selectors.forEach(s => this._enable(s, s === selector));\n                this.params.globalHotSwitch.call(this, true);\n            } else {\n                this._enable(selector);\n            }\n        }\n    }\n\n    _loadGlobalExtensions() {\n        this.params.globals.forEach(ext => {\n            let found = false;\n            for (let instance of this.extensions) {\n                if (instance instanceof ext[0]) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                this.extensions.add(Reflect.construct(ext[0], [this]));\n            }\n            ext[0].build(this, ext[1]);\n        });\n    }\n\n    static _warnBadSelector(selectors) {\n        selectors.split(', ').forEach(selector => {\n            if (!document.querySelector(selector)) {\n                console\n                    .warn(`${this.constructor.name}: An element with identifier '${selector}' not found. (Skipping...)`);\n                return true;\n            }\n        });\n    }\n\n    static get characterSet() {\n        return 'abgdevzTiklmnopJrstufqRySCcZwWxjh'.split('');\n    }\n\n    static getContext(selector) {\n        return (selector.tagName === 'IFRAME') ?\n            (selector.contentWindow || selector.contentDocument).window : selector;\n    }\n\n    static get opts() {\n        return 'geokeyboard';//this.constructor.name;\n    }\n}\n\nmodule.exports = Geokeyboard;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.js","class Select {\n    constructor(parent, selectors=null, opts={}) {\n        this.parent = parent;\n\n        if (selectors) {\n            this.selectors = selectors.split(', ');\n        }\n\n        this.opts = Object.assign({\n            select: null,\n            focusListenerOnSelect: true,\n            selectListener: true,\n            autoSwitch: true,\n        }, opts);\n    }\n\n    redefine(selectors, opts) {\n        this.opts = Object.assign(this.opts, opts);\n        if (this.selectors) {\n            this.selectors = Array.from(new Set(this.selectors.concat(selectors.split(', '))));\n        } else {\n            this.selectors = selectors.split(', ');\n        }\n    }\n\n    listeners() {\n        if (this.opts.select === null) {\n            return;\n        }\n\n        const schema = [];\n\n        this.selectors.forEach((s,i) => {\n            schema.push([s, [\n                ['focusListenerOnSelect-'+i, 'focus', e => this.updateSelectValue.call(this, e)]\n            ]]);\n        });\n\n        schema.push([this.opts.select, [\n            ['selectListener', 'change', e => this.changeHandler.call(this, e)]\n        ]]);\n\n        return schema;\n    }\n\n    enabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.select).value = 'true';\n        }\n    }\n\n    disabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.select).value = 'false';\n        }\n    }\n\n    changeHandler(e) {\n        this.selectors.forEach(s => {\n            const selector = document.querySelector(s);\n\n            const value = e.currentTarget.value !== 'true';\n\n            if (value === 'true') {\n                this.parent._enable.call(this.parent, selector);\n            } else if (value === 'false') {\n                this.parent._disable.call(this.parent, selector);\n            } else {\n                return;\n            }\n        });\n\n        this.parent._focus(Array.from(document.querySelectorAll(this.selectors.join(','))));\n    }\n\n    updateSelectValue(e) {\n        document.querySelector(this.opts.select).value = e.currentTarget[this.parent.constructor.opts].replaceOnType\n            .toString();\n    }\n\n    // For global usage\n    static build(geokb, params={}) {\n        Select.geokb = geokb;\n\n        if (!Select.params) {\n            Select.params = {\n                select: null,\n                focusListener: true,\n                autoSwitch: true\n            }\n        }\n        Select.params = Object.assign(Select.params, params);\n\n        const globalSelect = document.querySelector(Select.params.select);\n\n        globalSelect.addEventListener('change', (e) => {\n            geokb.selectors.forEach(s => e.currentTarget.value === 'true' ? geokb._enable(s) : geokb._disable(s));\n            geokb._focus(geokb.selectors);\n        });\n\n        geokb.selectors.forEach(s => {\n           s.addEventListener('focus', (e) => {\n               if (e.currentTarget[geokb.constructor.opts].replaceOnType) {\n                   document.querySelector(Select.params.select).value = 'true';\n               } else {\n                   document.querySelector(Select.params.select).value = 'false';\n               }\n           });\n        });\n\n        if (geokb.params.forceEnabled) {\n            Select.globalEnabled(true);\n        }\n    }\n\n    static globalEnabled(force) {\n        if (Select.params.autoSwitch || force) {\n            document.querySelector(Select.params.select).value = 'true';\n        }\n    }\n\n    static globalDisabled(force) {\n        if (Select.params.autoSwitch || force) {\n            document.querySelector(Select.params.select).value = 'false';\n        }\n    }\n}\n\nmodule.exports = Select;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.select.js","class Checkbox {\n    constructor(parent, selectors=null, opts={}) {\n        this.parent = parent;\n\n        if (selectors) {\n            this.selectors = selectors.split(', ');\n        }\n\n        this.lastFocus = null;\n        this.opts = Object.assign({\n            checkbox: null,\n            focusListenerOnCheckbox: true,\n            checkboxListener: true,\n            autoSwitch: true,\n        }, opts);\n    }\n\n    changeHandler(e) {\n        this.selectors.forEach(s => {\n            const selector = document.querySelector(s);\n\n            if (e.currentTarget.checked === true) {\n                this.parent._enable.call(this.parent, selector);\n            } else {\n                this.parent._disable.call(this.parent, selector);\n            }\n        });\n\n        this.parent._focus(Array.from(document.querySelectorAll(this.selectors)));\n    }\n\n    updateCheckbox(e) {\n        e.currentTarget.checked = e.currentTarget[this.parent.constructor.opts].replaceOnType;\n    }\n\n    // For local usage\n    redefine(selectors, opts) {\n        this.opts = Object.assign(this.opts, opts);\n        if (this.selectors) {\n            this.selectors = Array.from(new Set(this.selectors.concat(selectors.split(', '))));\n        } else {\n            this.selectors = selectors.split(', ');\n        }\n    }\n\n    listeners() {\n        if (this.opts.checkbox === null) {\n            return;\n        }\n\n        const schema = [];\n\n        this.selectors.forEach((s,i) => {\n            schema.push([s, [\n                ['focusListenerOnCheckbox-'+i, 'focus', e => this.updateCheckbox.call(this, e)]\n            ]]);\n        });\n\n        schema.push([this.opts.checkbox, [\n            ['checkboxListener', 'change', e => this.changeHandler.call(this, e)]\n        ]]);\n\n        return schema;\n    }\n\n    enabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.checkbox).checked = true;\n        }\n    }\n\n    disabled(selector) {\n        if (!this.selectors) {\n            return;\n        }\n\n        const selectors = Array.from(document.querySelectorAll(this.selectors.join(',')));\n        if (this.opts.autoSwitch && selectors.includes(selector)) {\n            document.querySelector(this.opts.checkbox).checked = false;\n        }\n    }\n\n    // For global usage\n    static build(geokb, params={}) {\n        Checkbox.geokb = geokb;\n\n        if (!Checkbox.params) {\n            Checkbox.params = {\n                checkbox: null,\n                focusListener: true,\n                autoSwitch: true\n            };\n        }\n        Checkbox.params = Object.assign(Checkbox.params, params);\n\n        const globalCheckbox = document.querySelector(Checkbox.params.checkbox);\n\n        globalCheckbox.addEventListener('change', (e) => {\n            geokb.selectors.forEach(s => e.currentTarget.checked ? geokb._enable(s) : geokb._disable(s));\n            geokb._focus(geokb.selectors);\n        });\n\n        geokb.selectors.forEach(s => {\n            s.addEventListener('focus', (e) => {\n                e.currentTarget.checked = e.target.replaceOnType;\n            });\n        });\n\n        if (geokb.params.forceEnabled) {\n            Checkbox.globalEnabled(true);\n        }\n    }\n\n    static globalEnabled(force) {\n        if (Checkbox.params.autoSwitch || force) {\n            document.querySelector(Checkbox.params.checkbox).checked = true;\n        }\n    }\n\n    static globalDisabled(force) {\n        if (Checkbox.params.autoSwitch || force) {\n            document.querySelector(Checkbox.params.checkbox).checked = false;\n        }\n    }\n}\n\nmodule.exports = Checkbox;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.checkbox.js","class LocalStorage {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    // For global usage\n    static build(geokb, params={}) {\n        LocalStorage.geokb = geokb;\n\n        LocalStorage.params = Object.assign({\n            key: 'geokeyboard',\n        }, params);\n\n        LocalStorage._load.call(LocalStorage);\n    }\n\n    static globalEnabled() {\n        if (this.constructor.geokb.params.forceEnabled) {\n            return;\n        }\n\n        localStorage.setItem(this.constructor.params.key, true);\n    }\n\n    static globalDisabled() {\n        if (this.constructor.geokb.params.forceEnabled) {\n            return;\n        }\n\n        localStorage.setItem(this.constructor.params.key, false);\n    }\n\n    static _load() {\n        if (this.geokb.params.forceEnabled) {\n            return;\n        }\n\n        const state = JSON.parse(localStorage.getItem(this.params.key));\n\n        if (state === null) {\n            return;\n        }\n\n        this.geokb.selectors.forEach(s => {\n            return state ? this.geokb._enable(s) : this.geokb._disable(s);\n        });\n    }\n}\n\nmodule.exports = LocalStorage;\n\n\n// WEBPACK FOOTER //\n// ./src/geokeyboard.localstorage.js","const insertAtCaret = (element, content) => {\n    const tagName = (element.tagName || element.frameElement.tagName);\n\n    if (tagName === 'DIV' || tagName === 'IFRAME') {\n        let sel, range;\n\n        let windowContext = window, documentContext = document;\n        if (tagName === 'IFRAME') {\n            windowContext = element.window;\n            documentContext = element.document;\n        }\n\n        if (windowContext.getSelection) {\n            sel = windowContext.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n\n                let el = documentContext.createElement('DIV');\n                el.innerHTML = content;\n                let frag = documentContext.createDocumentFragment(), node, lastNode;\n                while ((node = el.firstChild)) {\n                    lastNode = frag.appendChild(node);\n                }\n                range.insertNode(frag);\n\n                if (lastNode) {\n                    range = range.cloneRange();\n                    range.setStartAfter(lastNode);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n            }\n        } else if (documentContext.selection && documentContext.selection.type !== 'Control') {\n            documentContext.selection.createRange().pasteHTML(content);\n        }\n    } else if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n        if (typeof element.selectionStart === 'number' && typeof element.selectionEnd === 'number') {\n            const start = element.selectionStart;\n            element.value = element.value.slice(0, start) + content + element.value.slice(element.selectionEnd);\n            element.selectionStart = element.selectionEnd = start + 1;\n            element.blur();\n            element.focus();\n        } else {\n            const range = document.selection.createRange();\n            let normal = element.value.replace(/\\r\\n/g, '\\n');\n\n            let textInputRange = element.createTextRange();\n            textInputRange.moveToBookmark(range.getBookmark());\n\n            let endRange = element.createTextRange();\n            endRange.collapse(false);\n\n            let start, end;\n            if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\n                start = end = charLength;\n            } else {\n                start = -textInputRange.moveStart('character', -charLength);\n                start += normal.slice(0, start).split('\\n').length - 1;\n\n                if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\n                    end = charLength;\n                } else {\n                    end = -textInputRange.moveEnd('character', -charLength);\n                    end += normal.slice(0, end).split('\\n').length - 1;\n                }\n            }\n\n            element.value = element.value.slice(0, start) + content + element.value.slice(end);\n            //start++;\n\n            textInputRange = element.createTextRange();\n            textInputRange.collapse(true);\n        }\n    }\n};\n\nmodule.exports = insertAtCaret;\n\n\n// WEBPACK FOOTER //\n// ./src/insert-at-caret.js"],"sourceRoot":""}